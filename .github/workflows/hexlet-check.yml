name: hexlet-check

on:
  - push
  - pull_request


jobs:
  testing:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [14.x]
    steps:
      - name: git clone frontend-project-lvl2 repository
        uses: actions/checkout@v2
      - name: Use Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node-version }}
      - name: Install dependencies
        run: make i
      - name: Run linter
        run: make lint
      - name: Run tests
        run: make test
  coverage:
    needs: [ testing ]
    name: coverage
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - uses: actions/setup-node@master
      with:
        node-version: [14.x]
    - run: make i
    - uses: paambaati/codeclimate-action@v2.2.4
      env:
        CC_TEST_REPORTER_ID: b7853d9de39ca64b5bf2f370317755cfa9cfdd0b7428ae31c23aa1b3c29ba4fd
      with:
        coverageCommand: npm coverage
